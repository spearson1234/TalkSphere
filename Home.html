<html>
<head>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"/>
  <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database.js"></script>
  <style>
    .slide-in {
      transition: transform 0.5s ease-in-out;
    }
    .hidden {
      display: none;
    }
    .loading {
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .tick {
      animation: tick 0.5s ease-in-out;
    }
    @keyframes tick {
      0% { transform: scale(0); }
      100% { transform: scale(1); }
    }
  </style>
</head>
<body class="bg-black text-white font-roboto">
  <!-- Top Banner for PC -->
  <div class="hidden md:flex justify-between items-center bg-black text-white p-4">
    <div class="flex items-center">
      <i class="fas fa-feather-alt text-2xl mr-2"></i>
      <span class="text-xl font-bold">Storymaker</span>
    </div>
    <div class="flex items-center">
      <i class="fas fa-user-circle text-2xl mr-2"></i>
      <i class="fas fa-chevron-down"></i>
    </div>
  </div>
  <!-- Main Content -->
  <div id="main-content" class="flex flex-col items-center mt-4 space-y-4 slide-in">
    <div class="bg-gray-800 shadow-lg rounded-lg p-4 w-80">
      <div class="flex items-center justify-between mb-2">
        <div class="flex items-center">
          <i class="fas fa-user-circle text-2xl mr-2"></i>
          <i class="fas fa-check-circle text-blue-500"></i>
        </div>
      </div>
      <h2 class="text-lg font-bold mb-1">Testing Story Title</h2>
      <p class="text-gray-400">This is a description of the testing story. It provides a brief overview of the content.</p>
    </div>
  </div>
  <!-- Profile Content -->
  <div id="profile-content" class="hidden flex flex-col items-center mt-4 space-y-4 slide-in">
    <div class="flex flex-col items-center mt-4">
      <i class="fas fa-user-circle text-6xl mb-2"></i>
      <h2 class="text-lg font-bold mb-1">@User</h2>
    </div>
  </div>
  <!-- Create Content -->
  <div id="create-content" class="hidden flex flex-col items-center mt-4 space-y-4 slide-in">
    <div class="bg-gray-800 shadow-lg rounded-lg p-4 w-80">
      <input id="story-title" class="bg-gray-700 text-white p-2 rounded mb-2 w-full" placeholder="Title" type="text"/>
      <textarea id="story-description" class="bg-gray-700 text-white p-2 rounded mb-2 w-full" placeholder="Your story..." rows="4"></textarea>
      <button class="bg-blue-500 text-white p-2 rounded flex items-center justify-center w-full" onclick="publishStory()">
        <i class="fas fa-paper-plane mr-2"></i> Publish
      </button>
    </div>
  </div>
  <!-- Report Content -->
  <div id="report-content" class="hidden flex flex-col items-center justify-center h-screen slide-in">
    <div class="bg-gray-800 shadow-lg rounded-lg p-4 w-80">
      <div class="flex justify-between items-center mb-2">
        <h2 class="text-lg font-bold">Report Story</h2>
        <span id="report-count" class="text-green-500 text-sm">0/2</span>
      </div>
      <textarea class="bg-gray-700 text-white p-2 rounded mb-2 w-full" placeholder="Reason for reporting..." rows="4"></textarea>
      <button id="submit-report-btn" class="bg-red-500 text-white p-2 rounded flex items-center justify-center w-full" onclick="submitReport()">
        <i class="fas fa-flag mr-2"></i> Submit Report
      </button>
    </div>
  </div>
  <!-- Loading Content -->
  <div id="loading-content" class="hidden flex flex-col items-center justify-center h-screen slide-in">
    <div class="bg-gray-800 shadow-lg rounded-lg p-4 w-80 flex flex-col items-center">
      <i class="fas fa-spinner text-4xl loading mb-2"></i>
      <h2 class="text-lg font-bold mb-1">Reporting...</h2>
    </div>
  </div>
  <!-- Confirmation Content -->
  <div id="confirmation-content" class="hidden flex flex-col items-center justify-center h-screen slide-in">
    <div class="bg-gray-800 shadow-lg rounded-lg p-4 w-80 flex flex-col items-center">
      <i class="fas fa-check-circle text-4xl text-green-500 tick mb-2"></i>
      <h2 class="text-lg font-bold mb-1">Thank You, Our admins will review this in less than 24h!</h2>
    </div>
  </div>
  <!-- Bottom Banner for Mobile -->
  <div class="fixed bottom-0 left-0 right-0 bg-black text-white flex justify-around items-center p-2 md:hidden">
    <div class="flex flex-col items-center" onclick="showHome()">
      <i class="fas fa-home text-xl"></i>
      <span class="text-xs">Home</span>
    </div>
    <div class="flex flex-col items-center" onclick="showCreate()">
      <i class="fas fa-plus-circle text-xl"></i>
      <span class="text-xs">Create</span>
    </div>
    <div class="flex flex-col items-center" onclick="showProfile()">
      <i class="fas fa-user text-xl"></i>
      <span class="text-xs">Profile</span>
    </div>
  </div>
  <script>
    // Firebase configuration
    const firebaseConfig = {
    apiKey: "AIzaSyAHSW4ettEHj3Y562zYSI_n0Z1OwFaGsgw",
  authDomain: "login-71866.firebaseapp.com",
  databaseURL: "https://login-71866-default-rtdb.firebaseio.com",
  projectId: "login-71866",
  storageBucket: "login-71866.firebasestorage.app",
  messagingSenderId: "434042354282",
  appId: "1:434042354282:web:fbc98eaefe2ef6513a2813"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const database = firebase.database();

    let reportCount = 0;
    let currentUser = null;

    auth.onAuthStateChanged(user => {
      if (user) {
        currentUser = user;
        document.getElementById('story-title').placeholder = user.email.split('@')[0];
        if (user.email === 'admin@gmail.com') {
          document.getElementById('story-title').classList.add('text-blue-500');
        }
      } else {
        currentUser = null;
        document.getElementById('story-title').placeholder = 'Title';
        document.getElementById('story-title').classList.remove('text-blue-500');
      }
    });

    function showProfile() {
      document.getElementById('main-content').classList.add('hidden');
      document.getElementById('create-content').classList.add('hidden');
      document.getElementById('report-content').classList.add('hidden');
      document.getElementById('loading-content').classList.add('hidden');
      document.getElementById('confirmation-content').classList.add('hidden');
      document.getElementById('profile-content').classList.remove('hidden');
      document.getElementById('profile-content').classList.add('slide-in');
    }

    function showHome() {
      document.getElementById('profile-content').classList.add('hidden');
      document.getElementById('create-content').classList.add('hidden');
      document.getElementById('report-content').classList.add('hidden');
      document.getElementById('loading-content').classList.add('hidden');
      document.getElementById('confirmation-content').classList.add('hidden');
      document.getElementById('main-content').classList.remove('hidden');
      document.getElementById('main-content').classList.add('slide-in');
    }

    function showCreate() {
      document.getElementById('main-content').classList.add('hidden');
      document.getElementById('profile-content').classList.add('hidden');
      document.getElementById('report-content').classList.add('hidden');
      document.getElementById('loading-content').classList.add('hidden');
      document.getElementById('confirmation-content').classList.add('hidden');
      document.getElementById('create-content').classList.remove('hidden');
      document.getElementById('create-content').classList.add('slide-in');
    }

    function showReport() {
      document.getElementById('main-content').classList.add('hidden');
      document.getElementById('create-content').classList.add('hidden');
      document.getElementById('profile-content').classList.add('hidden');
      document.getElementById('loading-content').classList.add('hidden');
      document.getElementById('confirmation-content').classList.add('hidden');
      document.getElementById('report-content').classList.remove('hidden');
      document.getElementById('report-content').classList.add('slide-in');
    }

    function submitReport() {
      reportCount++;
      const reportCountElement = document.getElementById('report-count');
      reportCountElement.innerText = `${reportCount}/2`;
      if (reportCount === 1) {
        reportCountElement.classList.remove('text-green-500');
        reportCountElement.classList.add('text-yellow-500');
      } else if (reportCount >= 2) {
        reportCountElement.classList.remove('text-yellow-500');
        reportCountElement.classList.add('text-red-500');
        document.getElementById('submit-report-btn').disabled = true;
        document.getElementById('submit-report-btn').classList.add('opacity-50', 'cursor-not-allowed');
      }
      document.getElementById('report-content').classList.add('hidden');
      document.getElementById('loading-content').classList.remove('hidden');
      document.getElementById('loading-content').classList.add('slide-in');
      setTimeout(() => {
        document.getElementById('loading-content').classList.add('hidden');
        document.getElementById('confirmation-content').classList.remove('hidden');
        document.getElementById('confirmation-content').classList.add('slide-in');
      }, 5000);
    }

    function publishStory() {
      if (!currentUser) {
        alert('Please log in to publish a story.');
        return;
      }

      const title = document.getElementById('story-title').value;
      const description = document.getElementById('story-description').value;
      const storyCard = document.createElement('div');
      storyCard.className = 'bg-gray-800 shadow-lg rounded-lg p-4 w-80';
      storyCard.innerHTML = `
        <div class="flex items-center justify-between mb-2">
          <div class="flex items-center">
            <i class="fas fa-user-circle text-2xl mr-2"></i>
            ${currentUser.email === 'admin@gmail.com' ? '<i class="fas fa-check-circle text-blue-500"></i>' : ''}
          </div>
          <i class="fas fa-flag text-red-500 cursor-pointer" onclick="showReport()"></i>
        </div>
        <h2 class="text-lg font-bold mb-1">${title}</h2>
        <p class="text-gray-400">${description}</p>
      `;
      document.getElementById('main-content').appendChild(storyCard);
      showHome();
    }

    function login() {
      const email = prompt('Enter your email:');
      const password = prompt('Enter your password:');
      auth.signInWithEmailAndPassword(email, password)
        .then(userCredential => {
          currentUser = userCredential.user;
          alert('Logged in successfully!');
        })
        .catch(error => {
          alert('Error logging in: ' + error.message);
        });
    }

    function logout() {
      auth.signOut().then(() => {
        currentUser = null;
        alert('Logged out successfully!');
      }).catch(error => {
        alert('Error logging out: ' + error.message);
      });
    }
  </script>
</body>
</html>
