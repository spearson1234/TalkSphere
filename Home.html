                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
        }

        // Show profile frame
        function showProfile() {
            document.getElementById('profileFrame').classList.remove('hidden');
            document.getElementById('chatWindow').classList.add('hidden');
        }

        // Show chat window
        function showChatWindow() {
            document.getElementById('profileFrame').classList.add('hidden');
            document.getElementById('chatWindow').classList.remove('hidden');
        }

        // Show to-do list frame
        function showTodoList() {
            document.getElementById('todoListFrame').classList.remove('hidden');
            document.getElementById('chatWindow').classList.add('hidden');
        }

        // Get current username
        function getCurrentUsername() {
            const user = auth.currentUser;
            return user ? user.email.split('@')[0] : 'guest';
        }

        // Toggle dropdown menu
        function toggleDropdown() {
            const dropdown = document.getElementById('dropdownMenu');
            dropdown.classList.toggle('open');
        }

        // Logout user
        function logout() {
            auth.signOut().then(() => {
                window.location.href = 'login.html';
            }).catch((error) => {
                console.error('Error during logout:', error);
            });
        }

        // Update UI with user profile
        auth.onAuthStateChanged((user) => {
            if (user) {
                document.getElementById('usernamePlaceholder').textContent = user.email.split('@')[0];
                document.getElementById('loginButton').classList.add('hidden');
            } else {
                document.getElementById('usernamePlaceholder').textContent = 'Guest';
                document.getElementById('loginButton').classList.remove('hidden');
            }
        });

        // Firebase Authentication
        document.getElementById('loginButton').addEventListener('click', () => {
            const email = prompt('Enter your email:');
            const password = prompt('Enter your password:');
            auth.signInWithEmailAndPassword(email, password).catch((error) => {
                alert('Login failed: ' + error.message);
            });
        });
    </script>
</body>
</html>
