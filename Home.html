<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realtime Chat Application</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
     <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <style>
        .dropdown-enter {
            opacity: 0;
            transform: translateY(-10px);
        }
        .dropdown-enter-active {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 200ms, transform 200ms;
        }
        .dropdown-leave {
            opacity: 1;
            transform: translateY(0);
        }
        .dropdown-leave-active {
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 200ms, transform 200ms;
        }
    </style>
</head>
<body class="bg-gray-100 h-screen flex items-center justify-center">
    <div class="w-full max-w-md mx-auto bg-white rounded-lg shadow-lg flex flex-col h-full">
        <div class="flex items-center justify-between p-4 border-b border-gray-300">
            <h2 class="text-xl font-bold">Realtime Chat</h2>
            <div class="relative">
                <button id="profile-button" class="flex items-center focus:outline-none">
                    <div class="w-10 h-10 rounded-full bg-blue-500 text-white flex items-center justify-center mr-2">
                        <span class="font-bold">U</span>
                    </div>
                    <i class="fas fa-chevron-down text-blue-500"></i>
                </button>
                <div id="profile-menu" class="hidden absolute right-0 mt-2 w-48 bg-white border border-gray-300 rounded-lg shadow-lg">
                    <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Profile</a>
                    <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Settings</a>
                    <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Logout</a>
                </div>
            </div>
        </div>
        <div id="chat-box" class="flex-1 overflow-y-scroll p-4">
            <!-- Chat messages will appear here -->
        </div>
        <div class="flex p-4 border-t border-gray-300">
            <input id="message-input" type="text" class="flex-1 border border-gray-300 rounded-l px-4 py-2" placeholder="Type a message...">
            <button id="send-button" class="bg-blue-500 text-white px-4 py-2 rounded-r"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
                   apiKey: "AIzaSyAHSW4ettEHj3Y562zYSI_n0Z1OwFaGsgw",
    authDomain: "login-71866.firebaseapp.com",
    databaseURL: "https://login-71866-default-rtdb.firebaseio.com",
    projectId: "login-71866",
    storageBucket: "login-71866.appspot.com",
    messagingSenderId: "434042354282",
    appId: "1:434042354282:web:fbc98eaefe2ef6513a2813"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        const chatBox = document.getElementById('chat-box');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const profileButton = document.getElementById('profile-button');
        const profileMenu = document.getElementById('profile-menu');

        // Toggle profile menu with animation
        profileButton.addEventListener('click', () => {
            if (profileMenu.classList.contains('hidden')) {
                profileMenu.classList.remove('hidden', 'dropdown-leave', 'dropdown-leave-active');
                profileMenu.classList.add('dropdown-enter');
                setTimeout(() => {
                    profileMenu.classList.add('dropdown-enter-active');
                }, 10);
            } else {
                profileMenu.classList.remove('dropdown-enter', 'dropdown-enter-active');
                profileMenu.classList.add('dropdown-leave');
                setTimeout(() => {
                    profileMenu.classList.add('dropdown-leave-active');
                    setTimeout(() => {
                        profileMenu.classList.add('hidden');
                    }, 200);
                }, 10);
            }
        });

        // Function to send a message
        sendButton.addEventListener('click', () => {
            const message = messageInput.value.trim();
            if (message) {
                const newMessageRef = database.ref('messages').push();
                newMessageRef.set({
                    text: message,
                    timestamp: Date.now(),
                    color: 'bg-blue-500' // Placeholder color class
                });
                messageInput.value = '';
            }
        });

        // Function to display messages
        database.ref('messages').on('child_added', (snapshot) => {
            const message = snapshot.val();
            const messageElement = document.createElement('div');
            messageElement.classList.add('mb-2', 'p-2', 'rounded', 'max-w-xs', 'break-words', 'flex', 'items-start');

            const colorElement = document.createElement('div');
            colorElement.classList.add('w-10', 'h-10', 'rounded-full', message.color, 'text-white', 'flex', 'items-center', 'justify-center', 'mr-2');
            colorElement.textContent = 'U';

            const textElement = document.createElement('div');
            textElement.textContent = message.text;
            textElement.classList.add('bg-blue-100', 'text-blue-900', 'p-2', 'rounded', 'self-end');

            messageElement.appendChild(colorElement);
            messageElement.appendChild(textElement);

            chatBox.appendChild(messageElement);
            chatBox.scrollTop = chatBox.scrollHeight;
        });
    </script>
</body>
</html>
